<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nanna's Birthday Quest 2.0</title>
    <link rel="preload" as="image" href="funky_nanna.jpg">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Bangers&family=Playfair+Display:ital,wght@1,700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --gold: #FFD700;
            --success: #2ecc71;
            --bg-gradient: linear-gradient(-45deg, #1a2a6c, #b21f1f, #fdbb2d);
        }

        body {
            background: var(--bg-gradient);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            color: white;
            font-family: 'Inter', sans-serif;
            margin: 0;
            overflow-x: hidden;
            user-select: none; /* Prevents highlighting text while playing */
        }

        @keyframes gradientBG { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }

        /* HERO SECTION */
        #stage-opening {
            height: 100vh; display: flex; flex-direction: column; justify-content: center; 
            align-items: center; text-align: center; background: rgba(0,0,0,0.3);
        }

        .funky-img {
            width: 220px; height: 220px; border-radius: 50%; 
            border: 6px solid white; margin-bottom: 25px; 
            object-fit: cover; box-shadow: 0 0 40px var(--gold);
            animation: bounce 2s infinite;
        }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-15px); } }

        h1 { font-family: 'Bangers', cursive; font-size: 3.5rem; color: var(--gold); letter-spacing: 2px; text-shadow: 3px 3px 0 #000; margin: 0; }

        /* GAME CARDS */
        .quest-level { display: none; min-height: 100vh; padding: 20px; flex-direction: column; justify-content: center; align-items: center; }
        
        .game-card {
            background: rgba(0, 0, 0, 0.7); backdrop-filter: blur(15px);
            padding: 30px; border-radius: 20px; border: 1px solid rgba(255,255,255,0.2);
            max-width: 600px; width: 90%; text-align: center; position: relative;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
        }

        /* --- GAME 1: WORD SCRAMBLE --- */
        .scramble-container { display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; margin: 20px 0; }
        .letter-tile {
            background: #fff; color: #000; padding: 10px 15px; font-weight: bold; font-size: 1.2rem;
            border-radius: 8px; cursor: pointer; border-bottom: 4px solid #ccc;
            transition: transform 0.1s;
        }
        .letter-tile:active { transform: translateY(4px); border-bottom: 0; }
        .answer-box { 
            min-height: 50px; border-bottom: 2px solid var(--gold); margin: 20px; 
            font-family: 'Bangers', cursive; font-size: 2rem; letter-spacing: 5px; color: var(--gold);
        }

        /* --- GAME 2: PULSE CHECK --- */
        .pulse-track {
            width: 100%; height: 30px; background: #333; border-radius: 15px; 
            position: relative; overflow: hidden; margin: 30px 0; border: 2px solid #555;
        }
        .pulse-zone {
            position: absolute; left: 40%; width: 20%; height: 100%; background: var(--success); opacity: 0.5;
        }
        .pulse-bar {
            position: absolute; left: 0; width: 5px; height: 100%; background: white;
            box-shadow: 0 0 10px white;
            animation: movePulse 2s linear infinite alternate;
        }
        @keyframes movePulse { from { left: 0%; } to { left: 98%; } }

        /* --- GAME 3: HIDDEN KEYS --- */
        .hidden-key {
            font-size: 2rem; position: absolute; cursor: pointer; 
            animation: floatKey 3s ease-in-out infinite;
        }
        @keyframes floatKey { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }

        /* --- GAME 4: SLIDER --- */
        input[type=range] {
            width: 100%; margin: 20px 0; accent-color: var(--gold);
        }
        .slider-val { font-size: 2.5rem; font-weight: bold; color: var(--gold); }

        /* --- REVEAL SECTION --- */
        .reveal-section { display: none; animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        @keyframes popIn { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }

        .img-row { display: flex; gap: 10px; justify-content: center; margin-top: 20px; }
        .img-row img { 
            width: 45%; height: 180px; object-fit: cover; border-radius: 10px; border: 3px solid white;
        }

        /* FAMILY MESSAGES */
        .msg-grid { display: grid; grid-template-columns: 1fr; gap: 15px; text-align: left; margin-top: 20px; }
        .msg-card {
            background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px; border-left: 4px solid var(--gold);
        }
        .msg-author { color: var(--gold); font-size: 0.8rem; font-weight: bold; text-transform: uppercase; margin-bottom: 5px; display: block; }
        .msg-text { font-style: italic; font-size: 0.95rem; line-height: 1.4; }

        .btn {
            background: var(--gold); color: black; border: none; padding: 15px 40px; 
            font-weight: 800; cursor: pointer; border-radius: 50px; margin-top: 20px; 
            text-transform: uppercase; box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        .btn:hover { transform: scale(1.05); }

        /* Confetti */
        .confetti { position: fixed; top: -10px; z-index: 999; animation: fall linear forwards; pointer-events: none; }
        @keyframes fall { to { transform: translateY(110vh) rotate(360deg); } }

        video { width: 100%; border-radius: 15px; margin-top: 20px; border: 4px solid var(--gold); }
    </style>
</head>
<body>

    <div id="stage-opening">
        <img src="funky_nanna.jpg" class="funky-img" onerror="this.onerror=null; this.src='funky_nanna.jpeg'">
        <h1>HAPPY BIRTHDAY NANNA!</h1>
        <p style="margin-top: 15px; font-size: 1.2rem;">Get ready to play the 2025 Memory Quest!</p>
        <button class="btn" onclick="startQuest()">Start Game</button>
    </div>

    <div id="level1" class="quest-level">
        <div class="game-card">
            <div id="game1">
                <h3 style="color:var(--gold)">LEVEL 1: THE ACADEMIC CITY</h3>
                <p>Tap the letters to spell the city where Priyanka joined VGSoM:</p>
                <div class="answer-box" id="scramble-ans"></div>
                <div class="scramble-container" id="scramble-tiles">
                    </div>
                <button class="btn" onclick="resetScramble()" style="padding: 10px 20px; font-size: 0.8rem; background: #333; color: #fff;">Reset</button>
            </div>

            <div id="reveal1" class="reveal-section">
                <h2 style="color:var(--success)">LEVEL COMPLETE! üéì</h2>
                <div class="img-row">
                    <img src="vgsom1.jpg" onerror="this.src='vgsom1.jpeg'">
                    <img src="vgsom2.jpg" onerror="this.src='vgsom2.jpeg'">
                </div>
                <div class="msg-grid">
                    <div class="msg-card">
                        <span class="msg-author">From Priyanka</span>
                        <span class="msg-text">"My dream of VGSoM became reality because of you. Thank you for always pushing me to aim higher!"</span>
                    </div>
                </div>
                <button class="btn" onclick="goToLevel(2)">Next Level ‚Üí</button>
            </div>
        </div>
    </div>

    <div id="level2" class="quest-level">
        <div class="game-card">
            <div id="game2">
                <h3 style="color:var(--gold)">LEVEL 2: THE DOCTOR'S PULSE</h3>
                <p>Madhav is halfway through! Tap <b>STOP</b> when the bar is in the <span style="color:var(--success)">GREEN ZONE</span>.</p>
                <div class="pulse-track">
                    <div class="pulse-zone"></div>
                    <div class="pulse-bar" id="p-bar"></div>
                </div>
                <button class="btn" onclick="checkPulse()">STOP!</button>
            </div>

            <div id="reveal2" class="reveal-section">
                <h2 style="color:var(--success)">REFLEXES SHARP! ü©∫</h2>
                <div class="img-row">
                    <img src="madhav1.jpg" onerror="this.src='madhav1.jpeg'">
                    <img src="madhav2.jpg" onerror="this.src='madhav2.jpeg'">
                </div>
                <div class="msg-grid">
                    <div class="msg-card">
                        <span class="msg-author">From Madhav</span>
                        <span class="msg-text">"To my mentor. Halfway to being a doctor, and I owe my discipline to you."</span>
                    </div>
                </div>
                <button class="btn" onclick="goToLevel(3)">Next Level ‚Üí</button>
            </div>
        </div>
    </div>

    <div id="level3" class="quest-level">
        <div class="game-card">
            <div id="game3" style="min-height: 300px; position: relative;">
                <h3 style="color:var(--gold)">LEVEL 3: THE HIDDEN KEYS</h3>
                <p>Find and click the 3 hidden üóùÔ∏è keys to open the Hampi gates.</p>
                <div id="keys-area">
                    <div class="hidden-key" style="top: 60%; left: 10%;" onclick="foundKey(this)">üóùÔ∏è</div>
                    <div class="hidden-key" style="top: 20%; right: 10%;" onclick="foundKey(this)">üóùÔ∏è</div>
                    <div class="hidden-key" style="bottom: 10%; left: 45%;" onclick="foundKey(this)">üóùÔ∏è</div>
                </div>
                <p id="key-count" style="margin-top: 150px; font-weight: bold;">Keys Found: 0/3</p>
            </div>

            <div id="reveal3" class="reveal-section">
                <h2 style="color:var(--success)">UNLOCKED! üèõÔ∏è</h2>
                <div class="img-row">
                    <img src="hampi1.jpg" onerror="this.src='hampi1.jpeg'">
                    <img src="hampi2.jpg" onerror="this.src='hampi2.jpeg'">
                </div>
                <div class="msg-grid">
                    <div class="msg-card">
                        <span class="msg-author">Family Memory</span>
                        <span class="msg-text">"Exploring history together. The Hampi trip was magical because we were all together."</span>
                    </div>
                </div>
                <button class="btn" onclick="goToLevel(4)">Next Level ‚Üí</button>
            </div>
        </div>
    </div>

    <div id="level4" class="quest-level">
        <div class="game-card">
            <div id="game4">
                <h3 style="color:var(--gold)">LEVEL 4: THE GOLDEN NUMBER</h3>
                <p>Slide the bar to match Amma's Milestone Age.</p>
                <div class="slider-val"><span id="age-val">0</span></div>
                <input type="range" min="0" max="100" value="0" oninput="checkSlider(this.value)">
            </div>

            <div id="reveal4" class="reveal-section">
                <h2 style="color:var(--success)">GOLDEN 50! ‚ú®</h2>
                <div class="img-row">
                    <img src="amma1.jpg" onerror="this.src='amma1.jpeg'">
                    <img src="amma2.jpg" onerror="this.src='amma2.jpeg'">
                </div>
                <div class="msg-grid">
                    <div class="msg-card">
                        <span class="msg-author">For Amma & You</span>
                        <span class="msg-text">"You made her 50th birthday a festival. Thank you for putting her happiness first."</span>
                    </div>
                </div>
                <button class="btn" onclick="goToLevel(5)">Final Challenge ‚Üí</button>
            </div>
        </div>
    </div>

    <div id="level5" class="quest-level">
        <div class="game-card">
            <h3 style="color:var(--gold)">FINAL LEVEL: 2025 BLOCKBUSTERS</h3>
            <p>Tap 10 Telugu Movies released in 2025 to verify your identity!</p>
            <div id="movie-list" style="display:flex; flex-wrap:wrap; justify-content:center; gap:5px;"></div>
            
            <div id="reveal5" class="reveal-section">
                <h2 style="color:var(--gold)">QUEST COMPLETE! üèÜ</h2>
                <button class="btn" onclick="goToLevel(6)">Open Your Gifts üéÅ</button>
            </div>
        </div>
    </div>

    <div id="level6" class="quest-level">
        <div class="game-card">
            <h1 style="font-size:3rem;">WE LOVE YOU!</h1>
            
            <div class="msg-grid" style="max-height: 300px; overflow-y: auto; margin-bottom: 20px;">
                <div class="msg-card">
                    <span class="msg-author">From Janu</span>
                    <span class="msg-text">"Happy Birthday Nanna! Thank you for being our rock."</span>
                </div>
                <div class="msg-card">
                    <span class="msg-author">From Amma</span>
                    <span class="msg-text">"To my partner in crime. Cheers to another year of adventures."</span>
                </div>
            </div>

            <div id="video-container">
                <button class="btn" onclick="loadVideo()">‚ñ∂Ô∏è Play Birthday Video</button>
            </div>
        </div>
    </div>

    <script>
        // --- UTILS ---
        function spawnConfetti() {
            const el = document.createElement('div'); el.className = 'confetti';
            el.style.left = Math.random()*100+'vw'; 
            el.style.backgroundColor=['#FFD700','#ff0055','#00ddff'][Math.floor(Math.random()*3)];
            el.style.width=Math.random()*8+5+'px'; el.style.height=el.style.width; 
            el.style.animationDuration=Math.random()*2+3+'s';
            document.body.appendChild(el); setTimeout(()=>el.remove(),5000);
        }
        function burstConfetti() { for(let i=0;i<30;i++) setTimeout(spawnConfetti, i*30); }

        function startQuest() {
            document.getElementById('stage-opening').style.display='none';
            document.getElementById('level1').style.display='flex';
            initScramble();
        }

        function goToLevel(n) {
            document.querySelectorAll('.quest-level').forEach(e=>e.style.display='none');
            document.getElementById('level'+n).style.display='flex';
            window.scrollTo(0,0);
            if(n===5) populateMovies();
        }

        // --- GAME 1: SCRAMBLE ---
        const city = "KHARAGPUR";
        let currentString = "";
        
        function initScramble() {
            const container = document.getElementById('scramble-tiles');
            const letters = city.split('').sort(() => Math.random() - 0.5);
            container.innerHTML = '';
            currentString = "";
            document.getElementById('scramble-ans').innerText = "_ _ _ _ _ _ _ _ _";
            
            letters.forEach(l => {
                let btn = document.createElement('div');
                btn.className = 'letter-tile';
                btn.innerText = l;
                btn.onclick = function() {
                    currentString += l;
                    document.getElementById('scramble-ans').innerText = currentString;
                    this.style.visibility = 'hidden'; // Hide clicked tile
                    if(currentString === city) {
                        setTimeout(() => {
                            document.getElementById('game1').style.display='none';
                            document.getElementById('reveal1').style.display='block';
                            burstConfetti();
                        }, 500);
                    } else if (currentString.length === city.length) {
                        setTimeout(() => { alert("Wrong spelling! Try again."); resetScramble(); }, 300);
                    }
                };
                container.appendChild(btn);
            });
        }
        function resetScramble() { initScramble(); }

        // --- GAME 2: PULSE ---
        function checkPulse() {
            const bar = document.getElementById('p-bar');
            // Get position in percentage approx
            const parentWidth = bar.parentElement.offsetWidth;
            const barLeft = bar.offsetLeft;
            const percent = (barLeft / parentWidth) * 100;

            // Green zone is 40% to 60%
            if(percent >= 35 && percent <= 65) {
                bar.style.animationPlayState = 'paused';
                bar.style.background = 'var(--success)';
                setTimeout(() => {
                    document.getElementById('game2').style.display='none';
                    document.getElementById('reveal2').style.display='block';
                    burstConfetti();
                }, 800);
            } else {
                alert("Missed! Try to hit the Green Zone.");
            }
        }

        // --- GAME 3: HIDDEN KEYS ---
        let keysFound = 0;
        function foundKey(el) {
            el.style.display = 'none';
            keysFound++;
            document.getElementById('key-count').innerText = `Keys Found: ${keysFound}/3`;
            if(keysFound === 3) {
                setTimeout(() => {
                    document.getElementById('game3').style.display='none';
                    document.getElementById('reveal3').style.display='block';
                    burstConfetti();
                }, 500);
            }
        }

        // --- GAME 4: SLIDER ---
        function checkSlider(val) {
            document.getElementById('age-val').innerText = val;
            if(val == 50) {
                setTimeout(() => {
                    document.getElementById('game4').style.display='none';
                    document.getElementById('reveal4').style.display='block';
                    burstConfetti();
                }, 800);
            }
        }

        // --- GAME 5: MOVIES ---
        function populateMovies() {
            const list = document.getElementById('movie-list');
            if(list.children.length>0) return;
            let count=0;
            const movies = ["GAMECHANGER","DAAKU","THANDEL","MIRAI","KUBERA","SANKRANT","DRAGON","VEERAMALLU","HARAHARA","SWAYAMBHU"];
            
            movies.forEach(m=>{
                let b = document.createElement('button'); 
                b.style = "padding:12px; margin:5px; background:rgba(255,255,255,0.1); border:1px solid #aaa; color:white; border-radius:8px; cursor:pointer;";
                b.innerText=m;
                b.onclick = function() {
                    if(this.style.background!=='var(--gold)') {
                        this.style.background='var(--gold)'; this.style.color='black'; count++;
                        if(count===10) { 
                            document.getElementById('movie-list').style.display='none'; 
                            document.getElementById('reveal5').style.display='block'; 
                            burstConfetti();
                        }
                    }
                };
                list.appendChild(b);
            });
        }

        function loadVideo() {
            document.getElementById('video-container').innerHTML = `
                <video controls autoplay style="width:100%; border:4px solid var(--gold); border-radius:15px;">
                    <source src="birthday_wish.mp4" type="video/mp4">
                </video>`;
        }
    </script>
</body>
</html>
